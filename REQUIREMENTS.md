# Спецификация MVP — Notion-подобное приложение (База знаний)

> Документ для разработки. Все пункты согласованы со скринами-референсами.

---

## 1. Визуал и UI

| Требование | Статус | Референс |
|------------|--------|----------|
| **Сайдбар** — слева, как в Notion | ✓ | Скрин 1: sidebar с "Shared", иерархия страниц, иконки |
| **Тема** — только тёмная | ✓ | Все скрины: тёмный фон, светлый текст |
| **Цвета/акценты** | ✓ | Скрин 4–5: палитра текста и фона (Gray, Brown, Orange, Yellow, Green, Blue, Purple, Pink, Red) |
| **Шрифты** — как в Notion | ✓ | Скрин 8: Default, Serif, Mono + Small text |
| **Длина строки** | ✓ Настраиваемо | Скрин 8: Full width toggle |

---

## 2. Иерархия страниц

| Требование | Статус | Референс |
|------------|--------|----------|
| **Структура** — страницы → подстраницы, дерево | ✓ | Скрин 1: "Shared" с вложенными страницами |
| **Глубина** — без ограничений | ✓ | — |
| **Сайдбар** — стрелки/иконки, drag-and-drop | ✓ | Скрин 1: иконки страниц, тройка точек для drag |
| **База/раздел** — страница = база (как в Notion) | ✓ | Скрин 1: "Секретная База знаний..." |

---

## 3. Редактор текста

| Требование | Статус | Референс |
|------------|--------|----------|
| **Начало страницы** — иконка + заголовок, потом блоки | ✓ | Скрин 1: гриб + "Секретная База знаний..." |
| **Блоки** — Text, H1–H3, буллеты, нумерованный список, to-do, code, quote, callout, toggle, 2/3 columns | ✓ | Скрин 3: меню "Turn into" |
| **Markdown** — # для заголовков, - для списков | ✓ | — |
| **Комбинация /** — выбор типа блока | ✓ | Скрин 2–3: Search actions + Turn into |
| **Медиа** — картинки (загрузка/ссылка), видео (YouTube/Vimeo, embed) | ✓ | — |

### Доп. действия блока (контекстное меню)
- Turn into (смена типа)
- Color (цвет текста и фона)
- Copy link to block (⌘^L)
- Duplicate (⌘D)
- Move to (⌘⇧P)
- Delete (Del)
- Suggest edits (⌘⇧X)
- Last edited by [имя] [дата]

---

## 4. Пользователи и доступы

| Требование | Статус | Референс |
|------------|--------|----------|
| **Роли** — админ, куратор | ✓ | Скрин 6: Share dialog |
| **Ученик** — не роль; просмотр только по публичным ссылкам (как гость) | ✓ | — |
| **Куратор** — создание/редактирование материалов, **без** управления доступами | ✓ | — |
| **Админ** — всё как куратор + публикация страниц, обновление ссылки | ✓ | Скрин 7 |
| **Публикация** | ✓ | Скрин 7: Publish, кастомный URL, Search engine indexing, Duplicate as template, Embed, Share via social |
| **Группы/классы** | ✗ Не в MVP | — |

### Сценарий работы
1. Админ/куратор создаёт страницу с материалами
2. **Только админ** делает страницу публичной и получает ссылку
3. Админ может обновить ссылку (кнопка «Обновить ссылку»)
4. Ученик открывает ссылку и просматривает материалы — без регистрации, как обычный посетитель (как в Notion)

---

## 5. Материалы и импорт

| Требование | Статус | Референс |
|------------|--------|----------|
| **В Notion сейчас** — страницы, таблицы, медиа, ссылки | ✓ | — |
| **Экспорт** — вручную / API / сторонние — чем быстрее и удобнее | ✓ | Скрин 8: Import, Export |
| **Миграция** — разовый перенос | ✓ | — |

---

## 6. Функции MVP

| Требование | Статус | Референс |
|------------|--------|----------|
| **Поиск** — по всем страницам и контенту | ✓ | Скрин 1: Search в sidebar |
| **Копирование страниц** — дубликат со всем содержимым | ✓ | Скрин 2, 8: Duplicate (⌘D) |
| **Комментарии** | ✗ Не в MVP | — |
| **История изменений** | ✓ В теории | Скрин 8: Version history |
| **Избранное** | ✓ | Скрин 1: звезда в header |

### Меню страницы (три точки)
- Font: Default / Serif / Mono
- Small text toggle
- Full width toggle
- Lock page
- Suggest edits
- Copy link, Copy page contents
- Move to, Duplicate
- Import, Export
- Move to Trash
- Version history

---

## 7. Технические ограничения

| Параметр | Значение |
|----------|----------|
| **Одновременное редактирование** | Один редактирует |
| **Платформы** | Web + мобильная версия |
| **Офлайн** | Не требуется |
| **Лимиты** | Нет жёстких ограничений |

---

## Референс-скрины (путь к файлам)

1. `assets/image-2208b4ef-6429-4e3f-b997-02b4f9cdf7fb.png` — Общий вид: sidebar, страница, модули
2. `assets/image-ec9c562a-d7c2-4cc3-802e-b90fabe82aac.png` — Контекстное меню блока
3. `assets/image-f02c682e-d1db-4286-a236-ce951d2cff05.png` — Turn into (типы блоков)
4. `assets/image-21d4dca2-33e9-4fd6-8f73-3e67d86e7cce.png` — Color picker (начало)
5. `assets/image-7417e864-3c79-43e2-b520-5fbf9f20ae32.png` — Color picker (полный)
6. `assets/image-9d5f4d03-04bc-49bd-bce2-32c7d5d589ad.png` — Share dialog
7. `assets/image-297bb033-de25-471e-a459-fdc257ae4ee1.png` — Publish dialog
8. `assets/image-12cb6db1-9d79-457a-90f9-03d0d38a9113.png` — More options (fonts, Import/Export, Version history)

---

## Глоссарий

- **Админ** — создаёт/редактирует материалы, делает страницы публичными, обновляет ссылки
- **Куратор** — создаёт/редактирует материалы (без управления доступами)
- **Ученик** — не роль; просматривает материалы по публичной ссылке без входа (как гость)
